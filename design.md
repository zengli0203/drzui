# 饮食健康小程序设计文档

## 项目概述
这是一个拍照上传每日饮食照片、跟踪卡路里，并展示各种数据趋势图的小程序。用户可以记录每日饮食，查看营养摄入分析，获取饮食建议。项目名称为"曾博士的饮食建议"（Doro卡卡）。

## 目录结构
```
/
├── index.html          // 项目主页面，显示主界面内容
├── UI.html             // 模块展示页面
├── app.json            // 小程序配置文件
├── project.config.json // 小程序项目配置
├── pages/              // 页面目录
│   ├── index/          // 首页（主页面）
│   ├── dashboard/      // 展示页
│   ├── data/           // 数据页
│   ├── profile/        // 个人主页
│   ├── camera/         // 拍照页面
│   ├── meal-edit/      // 餐食编辑页面
│   ├── food-detail/    // 食物详情页
│   ├── diary/          // 日记页面
├── assets/             // 静态资源
│   ├── icons/          // 图标资源
│   ├── images/         // 图片资源
├── styles/             // 样式文件
│   ├── main.css        // 主样式文件
├── scripts/            // JavaScript文件
│   ├── main.js         // 主脚本文件
├── components/         // 组件
│   ├── calorie-block/  // 热量历史记录组件
│   ├── meal-card/      // 餐食卡片组件
│   ├── diary-module/   // 日记模块组件
```

## 页面详情与跳转逻辑

### 1. 首页 (index)
**功能：**
- 显示热量历史记录模块（七天热量柱状图）
- 显示当日饮食总览（三大营养素进度条）
- 显示当日餐食记录列表
- 提供日记功能
- 显示底部导航栏

**组件：**
- 热量历史记录模块（calorie-block）：
  - 显示过去7天的热量摄入情况，以柱状图形式展示
  - 包含日历按钮，点击可打开日期选择模态框
  - 当前日期以高亮显示，超标热量以红色显示

- 当日饮食总览模块：
  - 显示碳水化合物、蛋白质、脂肪的摄入量和百分比
  - 显示总热量摄入和剩余可摄入热量

- 餐食记录模块：
  - 按餐食类型（早餐、午餐、晚餐、加餐等）分组显示
  - 每个餐食条目显示食物图片、名称、分量和热量
  - 每组餐食类型有添加按钮，可添加新的食物

- 日记模块：
  - 提供当日健康日记功能
  - 可记录心情、运动情况、饮食感受等

**跳转逻辑：**
- 点击食物卡片 → 跳转到餐食编辑页面
- 点击拍照按钮 → 跳转到拍照页面
- 点击导航栏其他选项 → 跳转到相应页面
- 点击日记模块 → 打开日记模态框

### 2. 展示页 (dashboard)
**功能：**
- 展示用户的整体饮食情况和统计数据
- 显示每周热量摄入趋势图
- 显示最近餐食记录
- 显示营养素分析

**组件：**
- 用户信息卡片（头像、名称、基本信息）
- 每周热量趋势图（线形图）
- 营养素分析饼图
- 最近餐食记录列表
- 热门食物推荐

**跳转逻辑：**
- 点击餐食记录 → 跳转到食物详情页
- 点击拍照按钮 → 跳转到拍照页面
- 点击导航栏选项 → 跳转到相应页面

### 3. 数据页 (data)
**功能：**
- 提供详细的数据分析和图表
- 显示营养素摄入量的历史趋势
- 提供食物种类分析
- 显示健康指标和建议

**组件：**
- 时间段选择器（日、周、月、年）
- 热量趋势图（线形图）
- 营养素对比图（柱状图）
- 食物种类分布饼图
- 健康分析评分卡
- 个性化建议列表

**跳转逻辑：**
- 点击健康建议 → 跳转到相应的详情页
- 点击拍照按钮 → 跳转到拍照页面 (camera.html)
- 点击导航栏选项 → 跳转到相应页面

### 4. 个人主页 (profile)
**功能：**
- 显示用户基本信息和设置
- 提供目标设定和修改
- 显示成就和徽章
- 提供历史记录查看

**组件：**
- 用户信息卡片（头像、昵称、基本信息）
- 个人目标设置面板
- 成就徽章展示
- 设置列表（单位设置、通知设置等）
- 历史记录入口

**跳转逻辑：**
- 点击设置项 → 打开相应设置界面
- 点击历史记录 → 跳转到历史记录页面
- 点击导航栏选项 → 跳转到相应页面

### 5. 拍照页面 (camera)
**功能：**
- 提供拍照功能
- 支持从相册选择图片
- 提供跳过选项

**组件：**
- 相机取景框
- 拍照按钮
- 闪光灯控制
- 相册选择按钮
- 跳过按钮
- 返回按钮

**跳转逻辑：**
- 拍照或选择图片后 → 跳转到餐食编辑页面 
- 点击跳过 → 直接跳转到餐食编辑页面
- 点击返回 → 返回上一页面

### 6. 餐食编辑页面 (meal-edit)
**功能：**
- 编辑和确认餐食信息
- 显示食物营养分析
- 调整食物分量
- 添加食物标签

**组件：**
- 食物图片展示区
- 食物标签添加工具
- 食物名称和分类编辑区
- 分量调整控制器
- 营养素详情卡片
- 健康评分显示
- 保存和取消按钮

**跳转逻辑：**
- 点击保存 → 保存数据并返回首页
- 点击取消 → 放弃编辑并返回上一页面

### 7. 食物详情页 (food-detail)
**功能：**
- 显示食物的详细营养信息
- 提供食物的健康建议
- 显示类似食物推荐

**组件：**
- 食物图片
- 详细营养成分表
- 健康建议卡片
- 类似食物推荐列表
- 添加到餐食记录按钮

**跳转逻辑：**
- 点击添加按钮 → 将食物添加到当日记录并返回首页
- 点击返回 → 返回上一页面
- 点击推荐食物 → 跳转到相应食物的详情页

### 8. 日记页面 (diary)
**功能：**
- 记录当日心情、运动和饮食感受
- 添加日记内容
- 查看历史日记

**组件：**
- 心情选择器（表情图标）
- 运动类型标签选择
- 饮食感受选择器
- 日记内容编辑框
- 日期选择器
- 历史日记列表

**跳转逻辑：**
- 点击保存 → 保存日记并返回首页
- 点击历史日记 → 显示历史日记详情
- 点击返回 → 返回上一页面

## 模态框

### 1. 日历选择模态框
**功能：**
- 允许用户选择日期查看历史数据
- 提供月份查看和日期选择

**组件：**
- 月份标题和导航
- 星期标题行
- 日期网格
- 确认和取消按钮

**交互逻辑：**
- 点击日期 → 选中该日期
- 点击确认 → 关闭模态框并加载所选日期的数据
- 点击取消或关闭按钮 → 关闭模态框不进行任何操作

### 2. 日记模态框
**功能：**
- 允许用户记录当日心情、运动和饮食感受
- 提供文本输入区域记录详细内容

**组件：**
- 心情选择器（多个表情图标）
- 运动类型标签（可多选）
- 饮食感受选择器（单选）
- 文本输入区域
- 保存和取消按钮

**交互逻辑：**
- 选择心情、运动类型和饮食感受
- 输入日记文本
- 点击保存 → 保存日记并关闭模态框，更新日记区域显示
- 点击取消或关闭按钮 → 关闭模态框不保存内容

## 底部导航栏

**组件：**
- 展示页导航项（图表饼图图标）
- 首页导航项（餐具图标）
- 数据页导航项（图表折线图图标）
- 个人中心导航项（用户图标）

**交互逻辑：**
- 点击导航项 → 跳转到相应页面
- 当前页面对应的导航项显示为高亮状态（蓝色）
- 其他导航项显示为灰色

## 悬浮按钮
**功能：**
- 提供快速添加食物的入口

**交互逻辑：**
- 点击悬浮按钮 → 跳转到拍照页面

## 技术实现

1. **前端框架**
   - 使用微信小程序原生框架
   - 基于WXML、WXSS、JavaScript开发

2. **样式实现**
   - 复用Tailwind CSS的设计理念
   - 遵循微信小程序的样式规范

3. **数据存储**
   - 用户数据存储在云端数据库
   - 本地缓存常用数据提高性能

4. **图表实现**
   - 使用微信小程序图表组件
   - 自定义样式匹配应用整体风格

5. **相机功能**
   - 使用微信小程序提供的相机API
   - 实现拍照、预览和图片处理功能

## 设计规范

1. **配色方案**
   - 主色：深绿色 (#15803D)
   - 强调色：蓝色 (#3B82F6)
   - 警告色：红色 (#ff9e9e)
   - 背景色：白色 (#FFFFFF) 和浅灰色 (#f8f9fa)
   - 文本色：深灰色 (#333333)、中灰色 (#7A7A7A)、浅灰色 (#CCCCCC)

2. **字体规范**
   - 主标题：18px，粗体
   - 次级标题：16px，粗体
   - 正文：14px，常规
   - 小文本：12px，常规
   - 辅助文本：10px，常规

3. **圆角规范**
   - 大圆角：20px（用于主要模块容器）
   - 中圆角：12px（用于卡片和按钮）
   - 小圆角：4px（用于进度条和小型UI元素）

4. **间距规范**
   - 页面边距：16px
   - 模块间距：16px
   - 内容内边距：12px
   - 元素间距：8px

5. **阴影规范**
   - 浅阴影：用于卡片和按钮
   - 中等阴影：用于悬浮按钮和模态框

## 开发与部署

1. **开发环境**
   - 微信开发者工具
   - Node.js开发环境

2. **上线准备**
   - 小程序配置文件准备 (app.json, project.config.json)
   - 页面配置和路由规划
   - 权限申请与配置

3. **发布流程**
   - 代码审核
   - 提交微信审核
   - 发布上线
   - 版本更新计划

## 未来扩展计划

1. **社交功能**
   - 好友系统
   - 饮食打卡分享
   - 饮食习惯排行榜

2. **AI增强**
   - 更准确的食物识别
   - 个性化饮食建议
   - 智能食谱推荐

3. **数据导出**
   - 支持PDF报告导出
   - 与其他健康应用数据互通

4. **多平台支持**
   - 开发配套H5网页版
   - 考虑Android/iOS原生应用 